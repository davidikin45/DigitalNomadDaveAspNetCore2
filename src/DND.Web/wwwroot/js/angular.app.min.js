!function(){"use strict";window.onerror=function(e){window.alerts?window.alerts.error("There was a problem with your last action.  Please reload the page, then try again."):alert("Something serious went wrong.  Please close browser, then try again.")},window.app=angular.module("DND",["ui.bootstrap","ngMap"]),window.app.run(["$http","$rootScope","$templateCache","NgMap",function(e,t,o,r){r.getMap().then(function(e){console.log("map initialized"),t.map=e}).catch(function(e){console.error("map error: ",e)})}]),window.app.controller("MapCtrl",["$compile","NgMap",function(e,t){this.openGoogleMap=function(e,t){var o="https://www.google.com/maps/search/?api=1&query="+this.position.lat()+","+this.position.lng();t&&(o=o+"&query_place_id="+t),window.open(o,"_blank")},this.openLocation=function(e,t){window.location.href="/locations/"+t}}]),window.app.factory("alerts",[function(){return window.alerts}]),window.app.factory("$exceptionHandler",["$log","alerts",function(o,r){return function(e,t){r.error("There was a problem with your last action.  Please reload the page, then try again."),o.error(e,t)}}]),window.app.service("LoadingInterceptor",["$q","$rootScope","$log",function(t,o,r){var n=0,a=0;function i(){o.loading=a<n}return{request:function(e){return n++,i(),e||t.when(e)},requestError:function(e){return a++,i(),r.error("Request error:",e),t.reject(e)},response:function(e){return a++,i(),e||t.when(e)},responseError:function(e){return a++,i(),r.error("Response error:",e),o.error=e.data.error,o.errors=e.data.errors,$("#error").modal("show"),t.reject(e)}}}]),window.app.config(["$httpProvider",function(e){e.interceptors.push("LoadingInterceptor")}]),window.app.config(["$locationProvider",function(e){}]),window.app.config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","https://www.google.com/**"])}]),window.app.config(["$uibModalProvider",function(e){e.options.windowClass="modal-fullscreen",e.options.backdropClass="modal-backdrop-fullscreen",e.options.backdrop="static"}])}(),function(){"use strict";function e(e,t,o,r,n,a,i){var l=this;l.close=function(){},l.openGoogleMapModal=function(){n.open({templateUrl:"/site/template/googleMapModal.tmpl.cshtml",scope:r,bindToController:!0,controller:s,controllerAs:"vm",resolve:{latitude:function(){return l.latitude},longitude:function(){return l.longitude},placeid:function(){return l.placeid},NgMap:function(){return i},$sce:function(){return a}}})}}function s(o,e,t,r,n){var a=this;a.latitude=t,a.longitude=r,a.placeid=n,a.trustSrc=function(e){var t="";return t=a.placeid?"https://www.google.com/maps/embed/v1/place?q=place_id:"+a.placeid+"&zoom=6&key="+e:"https://www.google.com/maps/embed/v1/place?q="+a.latitude+","+a.longitude+"&zoom=6&key="+e,o.trustAsResourceUrl(t)}}window.app.directive("googleMap",function(){return{templateUrl:"/site/template/googleMap.tmpl.cshtml",controller:e,bindToController:{placeid:"@",latitude:"@",longitude:"@"},scope:{},controllerAs:"vm"}}),e.$inject=["$window","$filter","$rootScope","$scope","$uibModal","$sce","NgMap"],s.$inject=["$sce","NgMap","latitude","longitude","placeid"]}(),function(){"use strict";Object.defineProperty(Array.prototype,"count",{get:function(){return this.length}}),Array.prototype.addRange||(Array.prototype.addRange=function(e){this.push.apply(this,e)})}(),function(){var e={showAlert:t,success:function(e){t({alertClass:"alert-success",message:e})},info:function(e){t({alertClass:"alert-info",message:e})},warning:function(e){t({alertClass:"alert-warning",message:e})},error:function(e){t({alertClass:"alert-danger",message:e})}};window.alerts=e;var o=$(".alert-container"),r=_.template("<div class='alert <%= alertClass %> alert-dismissable'><button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;</button><%= message %></div>");function t(e){var t=$(r(e));o.append(t),window.setTimeout(function(){t.fadeOut()},3e3)}}(),window.app.filter("parseDate",function(){return function(e){return"string"!=typeof e||-1===e.indexOf("/Date")?e:new Date(parseInt(e.substr(6)))}});