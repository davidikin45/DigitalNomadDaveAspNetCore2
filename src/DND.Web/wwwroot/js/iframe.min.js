!function(c){var r="unobtrusiveAjaxClick",i="unobtrusiveAjaxClickTarget";function s(t,e){for(var a=window,o=(t||"").split(".");a&&o.length;)a=a[o.shift()];return"function"==typeof a?a:(e.push(t),Function.constructor.apply(null,e))}function d(i,t){var e,r,d,l;(e=i.getAttribute("data-ajax-confirm"))&&!window.confirm(e)||(r=c(i.getAttribute("data-ajax-loading")),l=parseInt(i.getAttribute("data-ajax-loading-duration"),10)||0,c.extend(t,{type:i.getAttribute("data-ajax-method")||void 0,url:i.getAttribute("data-ajax-url")||void 0,cache:"true"===(i.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(t){var e,a,o,n;return a=t,"GET"!==(n=o=d)&&"POST"!==n&&a.setRequestHeader("X-HTTP-Method-Override",o),!1!==(e=s(i.getAttribute("data-ajax-begin"),["xhr"]).apply(i,arguments))&&r.show(l),e},complete:function(){r.hide(l),s(i.getAttribute("data-ajax-complete"),["xhr","status"]).apply(i,arguments)},success:function(t,e,a){var o,n,r;o=i,n=t,-1===(a.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(r=(o.getAttribute("data-ajax-mode")||"").toUpperCase(),c(o.getAttribute("data-ajax-update")).each(function(t,e){var a;switch(r){case"BEFORE":a=e.firstChild,c("<div />").html(n).contents().each(function(){e.insertBefore(this,a)});break;case"AFTER":c("<div />").html(n).contents().each(function(){e.appendChild(this)});break;case"REPLACE-WITH":c(e).replaceWith(n);break;default:c(e).html(n)}})),s(i.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(i,arguments)},error:function(){s(i.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(i,arguments)}}),"POST"===(d=t.type.toUpperCase())&&(t.cache=!1,t.processData=!1,t.contentType=!1),c.ajax(t))}c(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),d(this,{url:this.href,type:"GET",data:[]})}),c(document).on("click","form[data-ajax=true] input[type=image]",function(t){var e=t.target.name,a=c(t.target),o=c(a.parents("form")[0]),n=a.offset();o.data(r,[{name:e+".x",value:Math.round(t.pageX-n.left)},{name:e+".y",value:Math.round(t.pageY-n.top)}]),setTimeout(function(){o.removeData(r)},0)}),c(document).on("click","form[data-ajax=true] :submit",function(t){var e=t.currentTarget.name,a=c(t.target),o=c(a.parents("form")[0]);o.data(r,e?[{name:e,value:t.currentTarget.value}]:[]),o.data(i,a),setTimeout(function(){o.removeData(r),o.removeData(i)},0)}),c(document).on("submit","form[data-ajax=true]",function(t){c(this).data(r);var e=c(this).data(i),a=e&&e.hasClass("cancel");t.preventDefault();var o,n=new FormData(this);!a&&((o=c(this).data("unobtrusiveValidation"))&&o.validate&&!o.validate())||d(this,{url:this.action,type:this.method||"GET",data:n})})}(jQuery),function(){var g=function(t){if(t){var e=t.match(/-?\d+\.\d+/g);return{latitude:e[0],longitude:e[1]}}};$(".editor-for-dbgeography, .display-for-dbgeography").each(function(t,e){var a=$(e),o=$("<div>",{css:{width:"100%",height:"400px"}}).insertAfter(a),n=null;null!==document.getElementById("PlaceId")&&(n=document.getElementById("PlaceId"));var r=g(this.value);r&&r.latitude&&r.longitude||(r={latitude:46.8729599408635,longitude:16.5243165940046});var i=new google.maps.LatLng(r.latitude,r.longitude),d=new google.maps.Map(o[0],{zoom:7,center:i,mapTypeId:"roadmap"}),l=new google.maps.Marker({position:i,map:d});$(document).ready(function(){$(window).resize(function(){google.maps.event.trigger(d,"resize"),d.setCenter(l.getPosition())}),google.maps.event.trigger(d,"resize"),d.setCenter(l.getPosition())});var c=function(t){l.setPosition(t.latLng),d.panTo(t.latLng),a.val(l.getPosition().toUrlValue(13))};if(a.hasClass("editor-for-dbgeography")){google.maps.event.addListener(d,"click",function(t){c(t),null!==n&&(n.value="")}),google.maps.event.addListener(d,"click",function(){m.close()}),$("<input>",{id:"map-search",class:"controls",type:"text",placeholder:"Enter a location"}).insertAfter(a);var s=document.getElementById("map-search"),u=($('<div id="infowindow-content"><span id="place-name" class="title"></span><br>Place ID<span id="place-id"></span><br><span id="place-address"></span></div>').insertAfter(a),document.getElementById("infowindow-content")),p=new google.maps.places.Autocomplete(s);p.bindTo("bounds",d),d.controls[google.maps.ControlPosition.TOP_LEFT].push(s);var m=new google.maps.InfoWindow;m.setContent(u),l.addListener("click",function(){m.open(d,l)}),p.addListener("place_changed",function(){m.close();var t=p.getPlace();if(t.geometry){t.geometry.viewport?d.fitBounds(t.geometry.viewport):(d.setCenter(t.geometry.location),d.setZoom(17)),t.geometry.location;var e=t.place_id;null!==n&&(n.value=e),c({latLng:t.geometry.location}),l.setVisible(!0),u.children["place-name"].textContent=t.name,u.children["place-id"].textContent=t.place_id,u.children["place-address"].textContent=t.formatted_address,m.open(d,l)}})}})}(),$(".modal-transparent").on("show.bs.modal",function(){setTimeout(function(){$(".modal-backdrop").addClass("modal-backdrop-transparent")},0)}),$(".modal-transparent").on("hidden.bs.modal",function(){$(".modal-backdrop").addClass("modal-backdrop-transparent")}),$(".modal-fullscreen").on("show.bs.modal",function(){setTimeout(function(){$(".modal-backdrop").addClass("modal-backdrop-fullscreen")},0)}),$(".modal-fullscreen").on("hidden.bs.modal",function(){$(".modal-backdrop").addClass("modal-backdrop-fullscreen")}),$(window).scroll(function(){50<=$(this).scrollTop()?$("#return-to-top").fadeIn(200):$("#return-to-top").fadeOut(200)}),$("#return-to-top").click(function(){$("body,html").animate({scrollTop:0},500)}),$(document).scroll(function(){localStorage.page=document.URL,localStorage.scrollTop=$(document).scrollTop()}),$(document).ready(function(){localStorage.page==document.URL&&$(document).scrollTop(localStorage.scrollTop)});